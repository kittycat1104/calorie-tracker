{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport axios from 'axios';\n\n// 設置 axios 請求攔截器\naxios.interceptors.request.use(function (config) {\n  var token = store.state.token;\n  if (token) {\n    config.headers.Authorization = \"Bearer \".concat(token);\n  }\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\n\n// 設置 axios 響應攔截器\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.response && error.response.status === 401) {\n    // token 過期或無效，清除登入狀態\n    store.dispatch('logout');\n    router.push('/login');\n  }\n  return Promise.reject(error);\n});\nvar app = createApp(App);\napp.use(router);\napp.use(store);\napp.mount('#app');","map":{"version":3,"names":["createApp","App","router","store","axios","interceptors","request","use","config","token","state","headers","Authorization","concat","error","Promise","reject","response","status","dispatch","push","app","mount"],"sources":["C:/myapp/diet/diet-vue/src/main.js"],"sourcesContent":["import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\nimport axios from 'axios'\r\n\r\n// 設置 axios 請求攔截器\r\naxios.interceptors.request.use(\r\n  config => {\r\n    const token = store.state.token\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// 設置 axios 響應攔截器\r\naxios.interceptors.response.use(\r\n  response => response,\r\n  error => {\r\n    if (error.response && error.response.status === 401) {\r\n      // token 過期或無效，清除登入狀態\r\n      store.dispatch('logout')\r\n      router.push('/login')\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nconst app = createApp(App)\r\napp.use(router)\r\napp.use(store)\r\napp.mount('#app') "],"mappings":"AAAA,SAASA,SAAS,QAAQ,KAAK;AAC/B,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AACAA,KAAK,CAACC,YAAY,CAACC,OAAO,CAACC,GAAG,CAC5B,UAAAC,MAAM,EAAI;EACR,IAAMC,KAAK,GAAGN,KAAK,CAACO,KAAK,CAACD,KAAK;EAC/B,IAAIA,KAAK,EAAE;IACTD,MAAM,CAACG,OAAO,CAACC,aAAa,aAAAC,MAAA,CAAaJ,KAAK,CAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACD,UAAAM,KAAK,EAAI;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAV,KAAK,CAACC,YAAY,CAACY,QAAQ,CAACV,GAAG,CAC7B,UAAAU,QAAQ;EAAA,OAAIA,QAAQ;AAAA,GACpB,UAAAH,KAAK,EAAI;EACP,IAAIA,KAAK,CAACG,QAAQ,IAAIH,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IACnD;IACAf,KAAK,CAACgB,QAAQ,CAAC,QAAQ,CAAC;IACxBjB,MAAM,CAACkB,IAAI,CAAC,QAAQ,CAAC;EACvB;EACA,OAAOL,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,IAAMO,GAAG,GAAGrB,SAAS,CAACC,GAAG,CAAC;AAC1BoB,GAAG,CAACd,GAAG,CAACL,MAAM,CAAC;AACfmB,GAAG,CAACd,GAAG,CAACJ,KAAK,CAAC;AACdkB,GAAG,CAACC,KAAK,CAAC,MAAM,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}